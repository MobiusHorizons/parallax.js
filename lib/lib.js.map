{"version":3,"sources":["webpack:///webpack/bootstrap 7c50c3b5b3deba53682d?31be","webpack:///./src/browser.js","webpack:///./src/parallax.js?8f59","webpack:///./src/actions.js?0e69","webpack:///./src/utils.js?2ff8"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;;;;;;;;;;;ACJA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACnBA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,gB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uDAAsD,wCAAwC;AAC9F;AACA,kD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB,yCAAyC;AAC/D;AACA;;AAEA;AACA;;;;;;;ACrCA;AACA;AACA;;AAEA;AACA,sDAAqD,sBAAsB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uCAAsC;AACtC,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"lib.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7c50c3b5b3deba53682d\n **/","/* \n * export parallax to window\n */\n\nwindow.parallax = require('./parallax');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/browser.js\n ** module id = 0\n ** module chunks = 1\n **/","/* create parallaxed views.\n *\n */\n\nvar actions = require(\"./actions\");\n\nvar init = function(viewport){\n  console.log(viewport);\n  var view = {\n    layers : [],\n    viewport : viewport\n  };\n\n  view.add = actions.add(view);\n\n  viewport.addEventListener('mousemove', actions.renderer(view));\n  return view;\n}\n\nexports.init = init;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/parallax.js\n ** module id = 5\n ** module chunks = 0 1\n **/","/* \n * Actions\n */\n\nvar utils = require('./utils');\n\nvar renderer = function(view){\n  return function(e){\n    var offset = utils.getOffset(view.viewport);\n    var pos = {  \n      x : (e.clientX - offset.left) / offset.width,\n      y : (e.clientY - offset.top ) / offset.height,\n    };\n    for (layer of view.layers){\n      var tl = layer.topLeft;\n      var br = layer.bottomRight;\n\n      var css = utils.interpolate(layer.setpoints, pos);\n      var t = css.translate,\n          r = css.rotate,\n          s = css.scale\n      ;\n      var transform = \"translate(\" +t.map(function(v){return (v * 0.01 * offset.width) + \"px\"}).join(',') + \") \" +\n                         \"rotatex(\" + r[0] + \"deg)\" + \"rotateY(\" + r[1] + \"deg)\" +\n                            \"scale(\" + s[0] +\")\"; \n      layer.element.style.transform = transform;\n    }\n  }\n}\n\nvar add = function(view){\n  return function(element, setpoints){\n    view.layers.push({ element: element, setpoints : setpoints});\n  }\n}\n\nexports.add = add;\nexports.renderer = renderer;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/actions.js\n ** module id = 6\n ** module chunks = 0 1\n **/","/* \n * Utility Functions used in the rest of the library.\n */\n\nvar average_by = function(weights){\n  var total = weights.reduce(function(prev, current){return current + prev});\n  console.log(total, weights);\n  return function(prev, current, idx){\n    if (idx == 1){\n      var w = weights[0] / total;\n      prev = prev.map(function(v, i){\n        return v * w;\n      });\n    }\n    var w = weights[idx] / total;\n\n    return current.map(function(v, i){\n      return (v * w) + (prev[i] || 0);\n    });\n  }\n}\n\nvar interpolate = function(setpoints, pos){\n  var positions = [];\n  var translations = [];\n  var rotations = [];\n  var scale = [];\n\n  for (var i = 0; i < setpoints.length; i++){\n    positions.push(setpoints[i].pos)\n    translations.push(setpoints[i].translate)\n    rotations.push(setpoints[i].rotate)\n    scale.push(setpoints[i].scale)\n  }\n  var weights = weight(positions, pos);\n\n  var out = {};\n  out.translate = translations.reduce(average_by(weights));\n  out.rotate    = rotations.reduce(average_by(weights));\n  out.scale       = scale.reduce(average_by(weights));\n  return out;\n};\n\nvar weight = function(positions, pos){\n  var total = positions.length;\n  var out = [];\n  for (p of positions){\n    var x = p[0] / 100;\n    var y = p[1] / 100;\n    out.push( (1 - Math.abs(pos.x - x) ) * (1 - Math.abs(pos.y - y) ) );\n  }\n  return out;\n};\n\nvar getOffset = function(element){\n  var offset = element.getBoundingClientRect();\n\n  if (element.parentElement == null) {// we are at the top\n    return offset; // base case;\n  }\n  // recursive case\n  parentOffset = getOffset(element.parentElement);\n  offset.left += parentOffset.left;\n  offset.top += parentOffset.top;\n  return offset;\n}\n\nexports.interpolate = interpolate;\nexports.getOffset = getOffset;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/utils.js\n ** module id = 7\n ** module chunks = 0 1\n **/"],"sourceRoot":""}